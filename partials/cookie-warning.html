{{ $wrapper_classes := (or .wrapper_classes "page-gutters position-fixed bottom-0 bg-white box-shadow-top width-100 d-flex justify-flex-end align-center")}}
{{ $wrapper_message_classes := (or .wrapper_message_classes "body-text text-column")}}
{{ $buttons_container_classes := (or .buttons_container_classes "d-flex justify-flex-end flex-shrink-0 margin-lg")}}
{{ $accept_button_classes := (or .accept_button_classes "btn btn-outline-white margin-right-lg")}}
{{ $decline_button_classes := (or .decline_button_classes "btn btn-outline-white")}}
<div class="cookie-warning {{ $wrapper_classes }}" data-cookie-warning>
  <div class="cookie-warning-message {{ $wrapper_message_classes }}">
    By clicking "Accept all cookies" you allow {{ .context.Site.Title }} to use cookies to track your usage of this site. Cookies are used to tailor your experience and monitor usage of our services. If you would prefer not to be tracked, click "Decline".
  </div>
  <div class="{{ $buttons_container_classes }}">
    <button class="{{ $accept_button_classes }}" data-cookie-consent="granted">{{ partial "hugo-sundries/svg/icons/cookie.svg" }}Accept</button>
    <button class="{{ $decline_button_classes }}" data-cookie-consent="denied">{{ partial "hugo-sundries/svg/icons/icon-cross.svg" }}Decline</button>
  </div> 
</div>
<script>
  setCookieWarningVisibility();
  function acceptCookies(event) {
    const type = event.target.dataset.cookieConsent;
    localStorage.setItem('cookieConsent', type);
    setCookieWarningVisibility();
  }

  function setCookieWarningVisibility() {
    if (typeof gtag !== 'function') {
      return;
    }
    if (localStorage.getItem('cookieConsent') === 'granted') {
      gtag('consent', 'update', {
        'analytics_storage': 'granted'
      });
      document.querySelector('[data-cookie-warning]').classList.add('hidden');
    } else if (localStorage.getItem('cookieConsent') === 'denied') {
      gtag('consent', 'update', {
        'analytics_storage': 'denied'
      });
      document.querySelector('[data-cookie-warning]').classList.add('hidden');
    } else {
      document.querySelector('[data-cookie-warning]').classList.remove('hidden');
    }
  }

  var buttons = document.querySelectorAll('[data-cookie-consent]');
  for (var i = 0; i < buttons.length; i++) {
    var button = buttons[i];
    button.addEventListener('click', acceptCookies);
  } 
</script>